function startAutoClicker(){return autoClicker?void console.log("Autoclicker is already running!"):(autoClicker=setInterval(function(){if(gameRunning()){var e=Math.floor(Math.random()*autoClickerVariance*2)-autoClickerVariance,t=clicksPerSecond+e;g_Minigame.m_CurrentScene.m_nClicks+=t,g_msTickRate=1100;var a=g_Minigame.m_CurrentScene.m_rgGameData.lanes[g_Minigame.m_CurrentScene.m_rgPlayerData.current_lane].active_player_ability_gold_per_click,n=getTarget();if(n&&a>0&&n.m_data.hp>0){var r=n.m_data.gold*a*g_Minigame.m_CurrentScene.m_nClicks;g_Minigame.m_CurrentScene.ClientOverride("player_data","gold",g_Minigame.m_CurrentScene.m_rgPlayerData.gold+r),g_Minigame.m_CurrentScene.ApplyClientOverrides("player_data",!0)}var i=g_Minigame.m_CurrentScene.m_rgStoredCrits.length;if(g_Minigame.m_CurrentScene.m_rgStoredCrits=[],debug){i>1&&console.log("Clicking "+g_Minigame.m_CurrentScene.m_nClicks+" times this second. ("+i+" crits)."),console.log(1==i?"Clicking "+g_Minigame.m_CurrentScene.m_nClicks+" times this second. (1 crit).":"Clicking "+g_Minigame.m_CurrentScene.m_nClicks+" times this second.");var o=g_Minigame.m_CurrentScene.CalculateDamage(g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_per_click*userMaxElementMultiiplier*g_Minigame.m_CurrentScene.m_nClicks),s="(unknown)";o>1e9?s=o/1e9+"B":o>1e6?s=o/1e6+"M":o>1e3&&(s=o/1e3+"K"),console.log("We did roughly "+s+" damage in the last second.")}}},autoClickerFreq),void console.log("autoClicker has been started."))}function startAutoUpgradeManager(){function e(){if(debug&&console.log("Checking for worthwhile upgrades"),s=g_Minigame.CurrentScene(),!s.m_bUpgradesBusy&&(-1===u.id&&(a&&$J(document.body).removeClass("upgrade_waiting"),y(!0),M(!0),k()),-1!==u.id&&n&&u.cost<=s.m_rgPlayerData.gold)){var e=$J(".link",document.getElementById("upgr_"+u.id)).get(0);e?s.TryUpgrade(e):console.error("failed to find upgrade")}}if(autoUpgradeManager)return void console.log("UpgradeManager is already running!");var t=30,a=!0,n=!0,r=1,i=[.4,.3,.2,.1],o=clicksPerSecond+Math.ceil(autoClickerVariance/2),s=g_Minigame.CurrentScene(),l=!1,u={id:-1,cost:0},g=[{id:0,level:1},{id:11,level:1},{id:2,level:10},{id:1,level:10}],c=[11,13,16,18,17,14,15,12],p=7,d=[3,4,5,6],m=[],_=[],b=[];Object.keys(s.m_rgTuningData.upgrades).sort(function(e,t){return e-t}).forEach(function(e){var t=s.m_rgTuningData.upgrades[e];switch(t.type){case 0:m.push(+e);break;case 1:_.push(+e);break;case 2:b.push(+e)}});var y=function(){var e=!1;return function(t){return(!e||t)&&(e=d.map(function(e){return{id:e,level:s.GetUpgradeLevel(e)}}).sort(function(e,t){return t.level-e.level})),e}}(),f=function(e){return e=e||y(),s.m_rgTuningData.upgrades[4].multiplier*e.reduce(function(e,t,a){return e+t.level*i[a]},0)},h=function(e){if(!s.bHaveUpgrade(e))return!1;var t=s.m_rgTuningData.upgrades[e],a=t.required_upgrade;if(void 0!==a){var n=t.required_upgrade_level||1;return n<=s.GetUpgradeLevel(a)}return!0},v=function(e,t){var a,n=s.m_rgTuningData.upgrades[e],r=0,i=0,o=s.GetUpgradeLevel(e);void 0===t&&(t=o+1);for(var l=t-o;l>0;l--)r+=n.multiplier,i+=n.cost*Math.pow(n.cost_exponential_base,t-l);var u=n.required_upgrade;if(void 0!==u){var g=v(u,n.required_upgrade_level||1);g.cost>0&&(r+=g.boost,i+=g.cost,a=g.required||u)}return{boost:r,cost:i,required:a}},A=function(){for(var e,t,a={id:-1,cost:0};g.length>0;){if(e=g[0],t=e.id,s.GetUpgradeLevel(t)<e.level){a={id:t,cost:s.GetUpgradeCost(t)};break}g.shift()}return a},C=function(){var e={id:-1,cost:0};return autoBuyAbilities&&c.some(function(t){return h(t)&&s.GetUpgradeLevel(t)<1?(e={id:t,cost:s.GetUpgradeCost(t)},!0):void 0}),e},w=function(){var e,t,a={id:-1,cost:0,hpg:0};return m.forEach(function(n){e=v(n),t=s.m_rgTuningData.player.hp*e.boost/e.cost,t>=a.hpg&&(void 0!==e.required&&(n=e.required),cost=s.GetUpgradeCost(n),(cost<=s.m_rgPlayerData.gold||0===a.cost||cost<a.cost)&&(a={id:n,cost:cost,hpg:t}))}),a},S=function(){var e,t,a,n,i,l={id:-1,cost:0,dpg:0},u=s.m_rgPlayerTechTree.damage_per_click,g=s.m_rgTuningData.player.damage_per_click,c=s.m_rgPlayerTechTree.damage_multiplier_crit,d=Math.min(s.m_rgPlayerTechTree.crit_percentage,1),m=y(),A=f(m);_.forEach(function(t){e=v(t),n=s.m_rgPlayerTechTree.base_dps*e.boost/o/e.cost,n>=l.dpg&&(void 0!==e.required&&(t=e.required),l={id:t,cost:s.GetUpgradeCost(t),dpg:n})}),h(p)&&(t=s.m_rgTuningData.upgrades[p],i=u*d*t.multiplier,a=s.GetUpgradeCost(p),n=i/a,n>=l.dpg&&(l={id:p,cost:a,dpg:n})),b.forEach(function(t){e=v(t),n=g*e.boost*(d*c+(1-d)*A)/e.cost,n>=l.dpg&&(void 0!==e.required&&(t=e.required),l={id:t,cost:s.GetUpgradeCost(t),dpg:n})}),t=s.m_rgTuningData.upgrades[4];var C=m.reduce(function(e,t){return e+t.level},1);a=t.cost*Math.pow(t.cost_exponential_base,C);var w=m.map(function(e){return{level:e.level}}),S=w[r-1].level;if(w[r-1].level++,r>1){var M=w[r-2].level;S>=M&&(w[r-2].level=S+1,w[r-1].level=M)}if(i=u*(1-d)*(f(w)-A),n=i/a,n>l.dpg){var k=m.filter(function(e){return e.level==S});k=k[Math.floor(Math.random()*k.length)].id,l={id:k,cost:a,dpg:n}}return l},M=function(){var e=!1;return function(t){if(e===!1||t){var a=s.m_rgPlayerTechTree.max_hp,n=s.m_rgGameData.lanes.reduce(function(e,t){return Math.max(e,t.enemies.reduce(function(e,t){return e+t.dps},0))},0);e=a/(n||4*s.m_rgGameData.level)}return e}}(),k=function(){if(u=A(),-1===u.id)if(M()<t)u=w();else{var e=S(),n=C();u=e.cost<n.cost||-1===n.id?e:n}-1!==u.id&&(a&&($J(".next_upgrade").removeClass("next_upgrade"),$J(document.getElementById("upgr_"+u.id)).addClass("next_upgrade")),debug&&console.log("next buy:",s.m_rgTuningData.upgrades[u.id].name,"("+FormatNumberForDisplay(u.cost)+")"))},x=function(e,t,a){var n=t+"_upgradeManager";e.prototype[n]||(e.prototype[n]=e.prototype[t]),e.prototype[t]=function(){this[n].apply(this,arguments),a.apply(this,arguments)}};if(x(CSceneGame,"TryUpgrade",function(){this.m_bUpgradesBusy&&(a&&$J(document.body).addClass("upgrade_waiting"),u.id=-1)}),x(CSceneGame,"ChangeLevel",function(){M(!0)<t&&k()}),upgradeManagerPrefilter=function(t,a,n){/ChooseUpgrade/.test(t.url)?n.success(function(){window.setTimeout(e,0)}).fail(function(){s.m_bNeedTechTree=!0,l=!0}):/GetPlayerData/.test(t.url)&&l&&n.success(function(t){var a=g_Server.m_protobuf_GetPlayerDataResponse.decode(t).toRaw(!0,!0);a.tech_tree&&(l=!1,s.m_bUpgradesBusy=!1,window.setTimeout(e,0))})},$J(document.body).removeClass("upgrade_waiting"),$J(".next_upgrade").removeClass("next_upgrade"),a){var P=function(e,t){return"-webkit-"+e+": "+t+"; "+e+": "+t+";"},T=".next_upgrade { "+P("filter","brightness(1.5) contrast(2)")+" }\n.next_upgrade.cantafford { "+P("filter","contrast(1.3)")+" }\n.next_upgrade .info .name, .next_upgrade.element_upgrade .level { color: #e1b21e; }\n#upgrades .next_upgrade .link { "+P("filter","brightness(0.8) hue-rotate(120deg)")+" }\n#elements .next_upgrade .link { "+P("filter","hue-rotate(120deg)")+" }\n.next_upgrade .cost { "+P("filter","hue-rotate(-120deg)")+" }\n.upgrade_waiting .next_upgrade { "+P("animation","blink 1s infinite alternate")+" }\n@-webkit-keyframes blink { to { opacity: 0.5; } }\n@keyframes blink { to { opacity: 0.5; } }",U=document.getElementById("upgradeManagerStyles");U||(U=document.createElement("style"),$J(U).attr("id","upgradeManagerStyles").appendTo("head")),$J(U).html(T)}autoUpgradeManager=setInterval(e,upgradeManagerFreq),console.log("autoUpgradeManager has been started.")}function startAutoRespawner(){return autoRespawner?void console.log("autoRespawner is already running!"):(autoRespawner=setInterval(function(){debug&&console.log("Checking if the player is dead."),g_Minigame.m_CurrentScene.m_bIsDead&&(debug&&console.log("Player is dead. Respawning."),RespawnPlayer())},respawnCheckFreq),void console.log("autoRespawner has been started."))}function startAutoTargetSwapper(){return autoTargetSwapper?void console.log("autoTargetSwapper is already running!"):(updateUserElementMultipliers(),autoTargetSwapperElementUpdate=setInterval(updateUserElementMultipliers,elementUpdateRate),autoTargetSwapper=setInterval(function(){debug&&console.log("Looking for a new target.");var e=getTarget();g_Minigame.m_CurrentScene.m_rgEnemies.each(function(t){compareMobPriority(t,e)&&(e=t)});var t=getTarget();e.m_data&&t.m_data&&e.m_data.id!=t.m_data.id?(debug&&null!==swapReason&&(console.log(swapReason),swapReason=null),g_Minigame.m_CurrentScene.m_rgPlayerData.current_lane!=e.m_nLane&&g_Minigame.m_CurrentScene.TryChangeLane(e.m_nLane),g_Minigame.m_CurrentScene.TryChangeTarget(e.m_nID)):e.m_data&&g_Minigame.m_CurrentScene.m_rgPlayerData.current_lane!=e.m_nLane&&g_Minigame.m_CurrentScene.TryChangeLane(e.m_nLane)},targetSwapperFreq),void console.log("autoTargetSwapper has been started."))}function startAutoAbilityUser(){return autoAbilityUser?void console.log("autoAbilityUser is already running!"):(autoAbilityUser=setInterval(function(){debug&&console.log("Checking if it's useful to use an ability.");var e=g_Minigame.CurrentScene().m_rgPlayerData.hp/g_Minigame.CurrentScene().m_rgPlayerTechTree.max_hp*100,t=getTarget(),a=g_Minigame.m_CurrentScene.m_rgGameData.lanes[g_Minigame.CurrentScene().m_rgPlayerData.current_lane];if(t){var n=t.m_data.hp/t.m_data.max_hp*100,r=g_Minigame.m_CurrentScene.m_rgLaneData[g_Minigame.CurrentScene().m_rgPlayerData.current_lane].friendly_dps,i=t.m_data.hp/r,o=g_Minigame.m_CurrentScene.m_nCurrentLevel+1>=nukeBossesAfterLevel&&(g_Minigame.m_CurrentScene.m_nCurrentLevel+1)%farmGoldOnBossesLevelDiff!==0,s=2==t.m_data.type||t.m_data.type===!1;if(0===t.m_data.type&&g_Minigame.m_CurrentScene.m_nCurrentLevel+1>=nukeBossesAfterLevel||s&&o){var l=hasAbility(5),u=hasAbility(6),g=hasAbility(18)&&autoUseConsumables;if(n>=90&&autoUseConsumables&&(hasAbility(14)||hasAbility(15)))hasAbility(14)?castAbility(14):hasAbility(15)&&castAbility(15);else if(l||g||u){var c=abilityIsUnlocked(5),p=abilityIsUnlocked(6);if(!c&&!g||!p||(l||g)&&(u||!p)){var d=currentLaneHasAbility(9);(n>=70||d&&n>=60)&&(d||hasAbility(9)||!abilityIsUnlocked(9)||abilityCooldown(9)>60)&&(hasAbility(9)&&!currentLaneHasAbility(9)?(debug&&console.log("Triggering Decrease Cooldown!"),castAbility(9)):(g?(debug&&console.log("Using Crit!"),castAbility(18)):l&&(debug&&console.log("Casting Morale Booster!"),castAbility(5)),u&&(debug&&console.log("Casting Good Luck Charm!"),castAbility(6))))}}hasAbility(10)&&(n>=useNukeOnSpawnerAbovePercent||2==t.m_data.type&&n>=useNukeOnBossAbovePercent)?(debug&&console.log("Nuclear launch detected."),castAbility(10)):0===t.m_data.type&&hasAbility(12)&&n>=useNukeOnSpawnerAbovePercent&&a.enemies.length>=4?(debug&&console.log("Triggering napalm!"),castAbility(12)):0===t.m_data.type&&hasAbility(11)&&n>=useNukeOnSpawnerAbovePercent&&a.enemies.length>=4&&(debug&&console.log("Triggering cluster bomb!"),castAbility(11)),s&&(hasAbility(16)&&autoUseConsumables&&n>useNukeOnBossAbovePercent&&(debug&&console.log("Using Max Elemental Damage on boss."),castAbility(16)),hasAbility(24)&&autoUseConsumables&&n>useNukeOnBossAbovePercent&&(debug&&console.log("Using Reflect Damage on boss."),castAbility(24)))}else!o&&s&&hasAbility(17)&&autoUseConsumables&&n>useRainingGoldAbovePercent&&i>30&&(debug&&console.log("Using Raining Gold on boss."),castAbility(17));var m=hasAbility(22)&&autoUseConsumables;(s||4==t.m_data.type)&&10>i&&(hasAbility(8)||m)&&(m?(debug&&console.log("Using Metal Detector via Treasure."),castAbility(22)):(debug&&console.log("Using Metal Detector."),castAbility(8)))}for(var _=0,b=0,y=1;10>y;y++){var f=10*(y-1)+5;_+=f*a.player_hp_buckets[y],b+=a.player_hp_buckets[y]}var h=_/b,v=b/(b+a.player_hp_buckets[0])*100;if((useMedicsAtPercent>=e||useMedicsAtLanePercent>=h&&v>useMedicsAtLanePercentAliveReq)&&!g_Minigame.m_CurrentScene.m_bIsDead){debug&&(useMedicsAtPercent>=e&&console.log("Health below threshold. Need medics!"),useMedicsAtLanePercent>=h&&v>useMedicsAtLanePercentAliveReq&&console.log("Average lane below threshold. Need medics!"));var A=hasAbility(19)&&autoUseConsumables,C=hasAbility(23)&&autoUseConsumables;(hasAbility(7)||A)&&currentLaneHasAbility(7)<2?A?(debug&&console.log("Using Medics via Pumped Up!"),castAbility(19)):(debug&&console.log("Using Medics!"),castAbility(7)):C&&useMedicsAtPercent>=e?(debug&&console.log("Using Steal Health in place of Medics!"),castAbility(23)):debug&&console.log("No medics to unleash!")}if(hasAbility(13)&&autoUseConsumables&&a.player_hp_buckets[0]>=useResurrectToSaveCount&&(debug&&console.log("Using resurrection to save "+a.player_hp_buckets[0]+" lane allies."),castAbility(13)),hasAbility(27)&&autoUseConsumables){var w=0;for(y=5;12>=y;y++)abilityIsUnlocked(y)&&(w+=abilityCooldown(y));1e3*w>=useLikeNewAboveCooldown&&(debug&&console.log("Using resurrection to save a total of "+w+" seconds of cooldown."),castAbility(27))}},abilityUseCheckFreq),void console.log("autoAbilityUser has been started."))}function startAutoItemUser(){autoUseConsumables=!0,console.log("Automatic use of consumables has been enabled.")}function startAllAutos(){startAutoClicker(),startAutoRespawner(),startAutoTargetSwapper(),startAutoAbilityUser(),startAutoUpgradeManager()}function stopAutoClicker(){autoClicker?(clearInterval(autoClicker),autoClicker=null,console.log("autoClicker has been stopped.")):console.log("No autoClicker is running to stop.")}function stopAutoRespawner(){autoRespawner?(clearInterval(autoRespawner),autoRespawner=null,console.log("autoRespawner has been stopped.")):console.log("No autoRespawner is running to stop.")}function stopAutoTargetSwapper(){autoTargetSwapper?(clearInterval(autoTargetSwapper),autoTargetSwapper=null,console.log("autoTargetSwapper has been stopped.")):console.log("No autoTargetSwapper is running to stop.")}function stopAutoAbilityUser(){autoAbilityUser?(clearInterval(autoAbilityUser),autoAbilityUser=null,console.log("autoAbilityUser has been stopped.")):console.log("No autoAbilityUser is running to stop.")}function stopAutoItemUser(){autoUseConsumables=!1,console.log("Automatic use of consumables has been disabled.")}function stopAutoUpgradeManager(){if(autoUpgradeManager){clearInterval(autoUpgradeManager),autoUpgradeManager=null;var e=function(e,t){e.prototype[t]=e.prototype[t+"_upgradeManager"]||e.prototype[t]};e(CSceneGame,"TryUpgrade"),e(CSceneGame,"ChangeLevel"),$J(document.body).removeClass("upgrade_waiting"),$J(".next_upgrade").removeClass("next_upgrade"),console.log("autoUpgradeManager has been stopped.")}else console.log("No autoUpgradeManager is running to stop.")}function stopAllAutos(){stopAutoClicker(),stopAutoRespawner(),stopAutoTargetSwapper(),stopAutoAbilityUser(),stopAutoItemUser(),stopAutoUpgradeManager()}function disableAutoNukes(){useNukeOnSpawnerAbovePercent=200,console.log("Automatic nukes have been disabled")}function castAbility(e){hasAbility(e)&&(12>=e&&null!==document.getElementById("ability_"+e)?g_Minigame.CurrentScene().TryAbility(document.getElementById("ability_"+e).childElements()[0]):null!==document.getElementById("abilityitem_"+e)&&g_Minigame.CurrentScene().TryAbility(document.getElementById("abilityitem_"+e).childElements()[0]))}function currentLaneHasAbility(e){return laneHasAbility(g_Minigame.CurrentScene().m_rgPlayerData.current_lane,e)}function laneHasAbility(e,t){try{return g_Minigame.m_CurrentScene.m_rgLaneData[e].abilities[t]?g_Minigame.m_CurrentScene.m_rgLaneData[e].abilities[t]:0}catch(a){return 0}}function abilityIsUnlocked(e){return 12>=e?(1<<e&g_Minigame.CurrentScene().m_rgPlayerTechTree.unlocked_abilities_bitfield)>0:getAbilityItemQuantity(e)>0}function getAbilityItemQuantity(e){for(var t=0;t<g_Minigame.CurrentScene().m_rgPlayerTechTree.ability_items.length;++t){var a=g_Minigame.CurrentScene().m_rgPlayerTechTree.ability_items[t];if(a.ability==e)return a.quantity}return 0}function abilityCooldown(e){return g_Minigame.CurrentScene().GetCooldownForAbility(e)}function hasAbility(e){return abilityIsUnlocked(e)&&abilityCooldown(e)<=0}function updateUserElementMultipliers(){gameRunning()&&g_Minigame.m_CurrentScene.m_rgPlayerTechTree&&(userElementMultipliers[3]=g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_air,userElementMultipliers[4]=g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_earth,userElementMultipliers[1]=g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_fire,userElementMultipliers[2]=g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_water,userMaxElementMultiiplier=Math.max.apply(null,userElementMultipliers))}function getMobTypePriority(e){if(!e||!e.m_data)return-1;switch(mobType=e.m_data.type,mobType){case 1:return 0;case 0:return 1;case 3:return 2;case 2:return 3;case 4:return 4;case!1:return 4;default:return-1}}function compareMobPriority(e,t){if(!e)return!1;if(!t)return swapReason="Swapping off a non-existent mob.",!0;var a=g_Minigame.CurrentScene().m_rgPlayerData.hp/g_Minigame.CurrentScene().m_rgPlayerTechTree.max_hp*100,n=laneHasAbility(e.m_nLane,7)||laneHasAbility(e.m_nLane,23),r=laneHasAbility(t.m_nLane,7)||laneHasAbility(t.m_nLane,23),i=laneHasAbility(e.m_nLane,17),o=laneHasAbility(t.m_nLane,17),s=getMobTypePriority(e),l=getMobTypePriority(t),u=userElementMultipliers[g_Minigame.m_CurrentScene.m_rgGameData.lanes[e.m_nLane].element],g=userElementMultipliers[g_Minigame.m_CurrentScene.m_rgGameData.lanes[t.m_nLane].element];laneHasAbility(e.m_nLane,16)&&(u=userMaxElementMultiiplier),laneHasAbility(t.m_nLane,16)&&(g=userMaxElementMultiiplier);var c=e.m_data.hp,p=t.m_data.hp;if(e.m_bIsDestroyed||0>=c)return!1;if(t.m_bIsDestroyed||0>=p)return swapReason="Swapping off a destroyed mob.",!0;if(i!=o){if(i>o&&(3==t.m_data.type||1==t.m_data.type))return swapReason="Switching to target with Raining Gold.",!0}else if(s!=l){if(s>l)return swapReason="Switching to higher priority target.",!0}else if(seekHealingPercent>=a&&!g_Minigame.m_CurrentScene.m_bIsDead){if(n!=r&&n)return swapReason="Swapping to lane with active healing.",!0}else if(u!=g){if(u>g)return swapReason="Switching to elementally weaker target.",!0}else if(c!=p&&p>c)return swapReason="Switching to lower HP target.",!0;return!1}function gameRunning(){try{return"object"==typeof g_Minigame&&2==g_Minigame.m_CurrentScene.m_rgGameData.status}catch(e){return!1}}function addPointer(){g_Minigame.m_CurrentScene.m_rgFingerTextures=[];for(var e=26,t=49,a=0;4>a;a++)for(var n=0;5>n;n++)g_Minigame.m_CurrentScene.m_rgFingerTextures.push(new PIXI.Texture(g_rgTextureCache.pointer.texture,{x:n*e,y:a*t,width:e,height:t}));g_Minigame.m_CurrentScene.m_nFingerIndex=0,g_Minigame.m_CurrentScene.m_spriteFinger=new PIXI.Sprite(g_Minigame.m_CurrentScene.m_rgFingerTextures[g_Minigame.m_CurrentScene.m_nFingerIndex]),g_Minigame.m_CurrentScene.m_spriteFinger.scale.x=g_Minigame.m_CurrentScene.m_spriteFinger.scale.y=2,g_Minigame.m_CurrentScene.m_containerParticles.addChild(g_Minigame.m_CurrentScene.m_spriteFinger)}function getTarget(){try{var e=g_Minigame.m_CurrentScene.GetEnemy(g_Minigame.m_CurrentScene.m_rgPlayerData.current_lane,g_Minigame.m_CurrentScene.m_rgPlayerData.target);return e}catch(t){return null}}function updatePlayersInLane(){var e="???";g_Minigame.m_CurrentScene.m_rgLaneData[g_Minigame.m_CurrentScene.m_rgPlayerData.current_lane]&&(e=g_Minigame.m_CurrentScene.m_rgLaneData[g_Minigame.m_CurrentScene.m_rgPlayerData.current_lane].players),$J("#players_in_lane").html(e)}function updatePlayersInRoom(){var e="???";g_Minigame.m_CurrentScene.m_rgLaneData[0]&&(e=g_Minigame.m_CurrentScene.m_rgLaneData[0].players+g_Minigame.m_CurrentScene.m_rgLaneData[1].players+g_Minigame.m_CurrentScene.m_rgLaneData[2].players),$J("#players_in_room").html(e)}function initEndDate(){var e=new Date;return e.getUTCHours()>16&&e.setUTCDate(e.getUTCDate()+1),e.setUTCHours(16,0,0,0),e}function updateStats(){var e=function(){return endDate.getTime()/1e3-g_Minigame.m_CurrentScene.m_nTime},t=function(){return(g_Minigame.m_CurrentScene.m_rgGameData.timestamp-g_Minigame.m_CurrentScene.m_rgGameData.timestamp_game_start)/g_Minigame.m_CurrentScene.m_rgGameData.level},a=function(){var t=e(),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),r=t-3600*a-60*n,i="";return a>0?(i+=1==a?"an hour":a+" hours",n>1&&(i+=" and "+n+" minute"+(1==n?"":"s"))):n>0?(i+=1==n?"a minute":n+" minutes",r>1&&(i+=" and "+r+" second"+(1==r?"":"s"))):i+=1>=r?"about a second":"about "+r+" seconds",i};$J("#avg_completion_rate").html(parseFloat(t()).toFixed(2)),$J("#estimated_end_level").html(Math.round(e()/t()+g_Minigame.m_CurrentScene.m_rgGameData.level)),$J("#remaining_time").html(a())}function addExtraUI(){var e=$J(".title_activity").html();$J(".title_activity").html(e+'&nbsp;[<span id="players_in_room">0</span> in room]'),$J("#gamecontainer").append('<div id="settings"></div>'),$J("#settings").css({position:"absolute",background:"url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/settings.png')","background-repeat":"no-repeat","background-position":"0px 0px",height:"500px",width:"250px","margin-top":"2px",top:"125px",right:"-50px","padding-top":"15px"}),$J("#settings").append('<div id="music_toggle" class="toggle"><span class="value disabled"></span><span class="title">Music: </span></div>'),$J("#settings").append('<div id="sfx_toggle" class="toggle"><span class="value disabled"></span><span class="title">SFX: </span></div>'),$J("#settings").append('<div id="autoclicker_toggle" class="toggle"><span class="value enabled"></span><span class="title">Auto-Clicker: </span></div>'),$J("#settings").append('<div id="autotargetswapper_toggle" class="toggle"><span class="value enabled"></span><span class="title">Target Swapper: </span></div>'),$J("#settings").append('<div id="autoabilityuse_toggle" class="toggle"><span class="value enabled"></span><span class="title">Ability Use: </span></div>'),$J("#settings").append('<div id="autoconsume_toggle" class="toggle"><span class="value enabled"></span><span class="title">Consumable Use: </span></div>'),$J("#settings").append('<div id="autoupgrade_toggle" class="toggle"><span class="value enabled"></span><span class="title">Auto Upgrader: </span></div>'),$J("#settings").append('<div id="particles_toggle" class="toggle"><span class="value disabled"></span><span class="title">Particles: </span></div>'),$J("#sfx_toggle").click(function(e){e.stopPropagation(),toggleSFX(!0)}),$J("#music_toggle").click(function(e){e.stopPropagation(),toggleMusic(!0)}),$J("#autoclicker_toggle").click(function(e){e.stopPropagation(),toggleAutoClicker()}),$J("#autotargetswapper_toggle").click(function(e){e.stopPropagation(),toggleAutoTargetSwapper()}),$J("#autoabilityuse_toggle").click(function(e){e.stopPropagation(),toggleAutoAbilityUser()}),$J("#autoconsume_toggle").click(function(e){e.stopPropagation(),toggleAutoItemUser()}),$J("#autoupgrade_toggle").click(function(e){e.stopPropagation(),toggleAutoUpgradeManager()}),$J("#particles_toggle").click(function(e){e.stopPropagation(),toggleSpammer()}),toggleSFX(!1),toggleMusic(!1),$J("#settings").click(function(){var e=$J("#settings");e.animate({right:-50==parseInt(e.css("right"),10)?-e.outerWidth():-50})}),$J("#gamecontainer").append('<div id="statistics"></div>'),$J("#statistics").css({position:"absolute",background:"url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/stats.png')","background-repeat":"no-repeat","background-position":"0px 0px",height:"500px",width:"250px","margin-top":"2px",top:"125px",left:"-50px","padding-top":"15px"}),$J("#statistics").append('<div id="stat_player_dpc" class="stat"><span class="title">Dmg Per Click: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_player_dps" class="stat"><span class="title">Dmg Per Second: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_player_crit" class="stat"><span class="title">Critical Chance: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_crit_mul" class="stat"><span class="title">Critical Dmg Multiplier: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_elemental_mul" class="stat"><span class="title">Elemental Multiplier: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_elemental_dpc" class="stat"><span class="title">Elemental DPC: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_elemental_dps" class="stat"><span class="title">Elemental DPS: </span><span class="value">0</span></div>'),$J("#statistics").append('<div id="stat_boss_loot" class="stat"><span class="title">Boss Loot Chance: </span><span class="value">0</span></div>'),setInterval(function(){function e(){return Math.max(g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_air,g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_earth,g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_fire,g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_water)}$J("#statistics #stat_player_dpc .value").html(FormatNumberForDisplay(g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_per_click,5)),$J("#statistics #stat_player_dps .value").html(FormatNumberForDisplay(g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_per_click*clicksPerSecond,5)),$J("#statistics #stat_player_crit .value").html(FormatNumberForDisplay(Math.round(100*g_Minigame.m_CurrentScene.m_rgPlayerTechTree.crit_percentage),5)+"%"),$J("#statistics #stat_crit_mul .value").html(FormatNumberForDisplay(g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_multiplier_crit,5)+"x"),$J("#statistics #stat_elemental_mul .value").html(FormatNumberForDisplay(e())+"x"),$J("#statistics #stat_elemental_dpc .value").html(FormatNumberForDisplay(e()*g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_per_click,5)),$J("#statistics #stat_elemental_dps .value").html(FormatNumberForDisplay(e()*g_Minigame.m_CurrentScene.m_rgPlayerTechTree.damage_per_click*clicksPerSecond,5)),$J("#statistics #stat_boss_loot .value").html(FormatNumberForDisplay(Math.round(100*g_Minigame.m_CurrentScene.m_rgPlayerTechTree.boss_loot_drop_percentage,5))+"%")},1e3),$J("#statistics").click(function(){var e=$J("#statistics");e.animate({left:-50==parseInt(e.css("left"),10)?-e.outerWidth():-50})}),customCSS(),addCustomButtons()}function addCustomButtons(){$J('<div style="height: 52px; position: absolute; bottom: 85px; left: 828px; z-index: 12;" onclick="SmackTV();"><br><br><span style="font-size:10px; padding: 12px; color: gold;">Smack TV</span></div>').insertBefore("#row_bottom"),$J(".game_options").remove(),$J('<a href="http://steamcommunity.com/minigame/" class="leave_game_btn"><span style="padding-right: 50px;">Close</span><br><span style="padding-right: 50px;">Game</span></a>').insertAfter("#settings"),$J(".leave_game_btn").css({width:"120px",position:"absolute",bottom:"72px","z-index":"12",left:"340px",background:"url('http://steamcommunity-a.akamaihd.net/public/images/promo/towerattack/leave_game_btn.png')","background-repeat":"no-repeat","background-position":"-75px 0px",height:"56px","float":"right","margin-right":"7px","padding-top":"14px",cursor:"pointer"}),$J('<div class="leave_game_helper">You can safely close the game or leave this screen at any time—you will continue collecting gold and damaging monsters even while away from your computer. Check back occasionally to see how you\'re doing and use in-game gold to purchase upgrades.</div>').insertAfter("#settings"),$J(".leave_game_helper").css({left:"150px",top:"initial",bottom:"-20px","z-index":"12"}),$J(".leave_game_btn").mouseover(function(){$J(".leave_game_helper").show()}).mouseout(function(){$J(".leave_game_helper").hide()}),$J(".leave_game_helper").hide();var e=document.querySelector(".breadcrumbs");if(e){var t=document.createElement("span");t.textContent=" > ",e.appendChild(t),t=document.createElement("span"),t.style.color="#D4E157",t.style.textShadow="1px 1px 0px rgba( 0, 0, 0, 0.3 )",t.textContent="Room "+g_GameID,e.appendChild(t),t=document.createElement("span"),t.textContent=" > ",e.appendChild(t),t=document.createElement("span"),t.style.color="#F089B2",t.style.textShadow="1px 1px 0px rgba( 0, 0, 0, 0.3 )",t.innerHTML='Expected Level: <span id="estimated_end_level">0</span>, Seconds Per Level <span id="avg_completion_rate">0</span>',e.appendChild(t),t=document.createElement("span"),t.textContent=" > ",e.appendChild(t),t=document.createElement("span"),t.style.color="#ACA5F2",t.style.textShadow="1px 1px 0px rgba( 0, 0, 0, 0.3 )",t.innerHTML='Remaining Time: <span id="remaining_time">0 Seconds</span>.',e.appendChild(t),updateStats(),setInterval(function(){updateStats()},1e4),"undefined"!=typeof GM_info&&(t=document.createElement("span"),t.style.cssFloat="right",t.style.color="#D4E157",t.style.textShadow="1px 1px 0px rgba( 0, 0, 0, 0.3 )",t.innerHTML='<a href="'+GM_info.namespace+'">'+GM_info.script.name+" v"+GM_info.script.version+"</a>",e.appendChild(t))}}function addGlobalStyle(e){$J("head").append("<style>"+e+"</style>")}function customCSS(){addGlobalStyle(".game_options .toggle_btn { background: url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/button_icons.png');background-repeat: no-repeat;background-position: 0px 0px;cursor: pointer;width: 150px;height: 21px;}"),addGlobalStyle(".game_options .toggle_btn.enabled {background: url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/button_icons.png');background-repeat: no-repeat;background-position: 0px -56px;cursor: pointer;height: 21px;}"),addGlobalStyle(".game_options .toggle_btn.disabled {background: url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/button_icons.png');background-repeat: no-repeat;background-position: 0px -112px;cursor: pointer;height: 21px; }"),addGlobalStyle(".game_options .toggle_btn:hover { background: url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/button_icons.png');background-repeat: no-repeat;background-repeat: no-repeat;background-position: -150px 0px;color: #fff;}"),addGlobalStyle(".game_options .toggle_btn.enabled:hover { background: url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/button_icons.png');background-repeat: no-repeat;background-position: -150px -56px;color: #fff; }"),addGlobalStyle(".game_options .toggle_btn.disabled:hover { background: url('https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/button_icons.png');background-repeat: no-repeat;background-position: -150px -112px;color: #fff;}"),addGlobalStyle(".game_options .toggle_btn span { position: relative; top: -20px; }"),addGlobalStyle("#settings .toggle { position: relative; margin-top: 10px; width: 75%; height: 32px; z-index: 10; }"),addGlobalStyle("#settings span.title { position: relative; top: 10px; float: right; right:15px; text-align:right; width: 80%;}"),addGlobalStyle("#settings span.value { position: relative; float: right; right:10px; display: inline-block; z-index:11; cursor: pointer;}"),addGlobalStyle("#settings span.value.enabled { background: url(https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/icons.png); background-repeat: no-repeat;background-position:0px 0px;width:30px;height:30px; }"),addGlobalStyle("#settings span.value.enabled:hover { background: url(https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/icons.png); background-repeat: no-repeat;background-position:-30px 0px;width:30px;height:30px; }"),addGlobalStyle("#settings span.value.disabled { background: url(https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/icons.png); background-repeat: no-repeat;background-position:0px -30px;width:30px;height:32px; }"),addGlobalStyle("#settings span.value.disabled:hover { background: url(https://raw.githubusercontent.com/ensingm2/SteamMonsterGameScript/master/icons.png); background-repeat: no-repeat;background-position:-30px -30px;width:30px;height:32px; }"),addGlobalStyle("#statistics .stat { position: relative; margin-top: 10px; width: 75%; height: 32px; z-index: 10; margin-left: 70px; margin-bottom: 10px;}"),addGlobalStyle("#statistics span.value { position: relative; float: right; margin-right: 30px; text-align: right; width: 100%;}"),addGlobalStyle("#statistics span.title { position: relative; width: 100%; font-weight: bold;}"),addGlobalStyle(".toggle_btn {background: #d6d6d6;-webkit-border-radius: 7; -moz-border-radius: 7; border-radius: 7px; color: #333; text-decoration: none; text-align: center;cursor: pointer;font-weight: bold;}"),addGlobalStyle(".toggle_btn:hover { background: #85c8f2; text-decoration: none; color: #fff;cursor: pointer;font-weight: bold;}")
}function updateToggle(e,t){t?$J("#"+e+"_toggle span.value").removeClass("enabled").addClass("disabled"):$J("#"+e+"_toggle span.value").removeClass("disabled").addClass("enabled")}function toggleSFX(e){var t=WebStorage.GetLocal("minigame_mute");e&&(t=!t,WebStorage.SetLocal("minigame_mute",t)),updateToggle("sfx",t)}function toggleMusic(e){e&&g_AudioManager.ToggleMusic(),updateToggle("music",WebStorage.GetLocal("minigame_mutemusic"))}function toggleAutoClicker(){autoClicker?stopAutoClicker():startAutoClicker(),updateToggle("autoclicker",!autoClicker)}function toggleAutoTargetSwapper(){autoTargetSwapper?stopAutoTargetSwapper():startAutoTargetSwapper(),updateToggle("autotargetswapper",!autoTargetSwapper)}function toggleAutoAbilityUser(){autoAbilityUser?stopAutoAbilityUser():startAutoAbilityUser(),updateToggle("autoabilityuse",!autoAbilityUser)}function toggleAutoItemUser(){autoUseConsumables?stopAutoItemUser():startAutoItemUser(),updateToggle("autoconsume",!autoUseConsumables)}function toggleAutoUpgradeManager(){autoUpgradeManager?stopAutoUpgradeManager():startAutoUpgradeManager(),updateToggle("autoupgrade",!autoUpgradeManager)}function spamNoClick(){var e=g_Minigame.m_CurrentScene.m_nClicks;g_Minigame.m_CurrentScene.DoClick({data:{getLocalPosition:function(){var e=getTarget(),t=440*e.m_nLane;return{x:e.m_Sprite.position.x-t,y:e.m_Sprite.position.y-52}}}}),g_Minigame.m_CurrentScene.m_nClicks=e}function toggleSpammer(){spammer?(clearInterval(spammer),spammer=null):confirm("Are you SURE you want to do this? This leads to massive memory leaks fairly quickly.")&&(spammer=setInterval(spamNoClick,1e3/clicksPerSecond)),updateToggle("particles",null==spammer)}var debug=!1,clicksPerSecond=g_TuningData.abilities[1].max_num_clicks,autoClickerVariance=Math.floor(clicksPerSecond/10);clicksPerSecond-=Math.ceil(autoClickerVariance/2);var respawnCheckFreq=5e3,targetSwapperFreq=1e3,abilityUseCheckFreq=2e3,itemUseCheckFreq=5e3,seekHealingPercent=20,upgradeManagerFreq=5e3,autoBuyAbilities=!1,refreshDelay=36e5,nukeBossesAfterLevel=1e3,farmGoldOnBossesLevelDiff=200,useNukeOnBossAbovePercent=25,useMedicsAtPercent=40,useMedicsAtLanePercent=70,useMedicsAtLanePercentAliveReq=30,useNukeOnSpawnerAbovePercent=75,useMetalDetectorOnBossBelowPercent=30,useStealHealthAtPercent=15,useRainingGoldAbovePercent=50,useLikeNewAboveCooldown=1422e4,useResurrectToSaveCount=150,autoClickerFreq=1e3,autoRespawner,autoClicker,autoTargetSwapper,autoTargetSwapperElementUpdate,autoAbilityUser,autoUpgradeManager,elementUpdateRate=6e4,autoUseConsumables=!0,userElementMultipliers=[1,1,1,1],userMaxElementMultiiplier=1,swapReason,lastLootLevel=0,lastLootCache=[],upgradeManagerPrefilter;if(upgradeManagerPrefilter||$J.ajaxPrefilter(function(){void 0!==upgradeManagerPrefilter&&upgradeManagerPrefilter.apply(this,arguments)}),"undefined"!=typeof unsafeWindow){unsafeWindow.debug=debug,unsafeWindow.clicksPerSecond=clicksPerSecond,unsafeWindow.autoClickerVariance=autoClickerVariance,unsafeWindow.respawnCheckFreq=respawnCheckFreq,unsafeWindow.targetSwapperFreq=targetSwapperFreq,unsafeWindow.abilityUseCheckFreq=abilityUseCheckFreq,unsafeWindow.itemUseCheckFreq=itemUseCheckFreq,unsafeWindow.seekHealingPercent=seekHealingPercent,unsafeWindow.upgradeManagerFreq=upgradeManagerFreq,unsafeWindow.autoBuyAbilities=autoBuyAbilities,unsafeWindow.useMedicsAtPercent=useMedicsAtPercent,unsafeWindow.useMedicsAtLanePercent=useMedicsAtLanePercent,unsafeWindow.useMedicsAtLanePercentAliveReq=useMedicsAtLanePercentAliveReq,unsafeWindow.useNukeOnSpawnerAbovePercent=useNukeOnSpawnerAbovePercent,unsafeWindow.useMetalDetectorOnBossBelowPercent=useMetalDetectorOnBossBelowPercent,unsafeWindow.useStealHealthAtPercent=useStealHealthAtPercent,unsafeWindow.useRainingGoldAbovePercent=useRainingGoldAbovePercent,unsafeWindow.autoUseConsumables=autoUseConsumables,unsafeWindow.useResurrectToSaveCount=useResurrectToSaveCount,unsafeWindow.slaveWindowUICleanup=slaveWindowUICleanup,unsafeWindow.slaveWindowPeriodicRestart=slaveWindowPeriodicRestart,unsafeWindow.slaveWindowPeriodicRestartInterval=slaveWindowPeriodicRestartInterval,unsafeWindow.nukeBossesAfterLevel=nukeBossesAfterLevel,unsafeWindow.farmGoldOnBossesLevelDiff=farmGoldOnBossesLevelDiff,unsafeWindow.useNukeOnBossAbovePercent=useNukeOnBossAbovePercent,unsafeWindow.startAutoClicker=startAutoClicker,unsafeWindow.startAutoRespawner=startAutoRespawner,unsafeWindow.startAutoTargetSwapper=startAutoTargetSwapper,unsafeWindow.startAutoAbilityUser=startAutoAbilityUser,unsafeWindow.startAutoItemUser=startAutoItemUser,unsafeWindow.startAllAutos=startAllAutos,unsafeWindow.startAutoUpgradeManager=startAutoUpgradeManager,unsafeWindow.stopAutoClicker=stopAutoClicker,unsafeWindow.stopAutoRespawner=stopAutoRespawner,unsafeWindow.stopAutoTargetSwapper=stopAutoTargetSwapper,unsafeWindow.stopAutoAbilityUser=stopAutoAbilityUser,unsafeWindow.stopAutoItemUser=stopAutoItemUser,unsafeWindow.stopAutoUpgradeManager=stopAutoUpgradeManager,unsafeWindow.stopAllAutos=stopAllAutos,unsafeWindow.disableAutoNukes=disableAutoNukes,unsafeWindow.castAbility=castAbility,unsafeWindow.hasAbility=hasAbility,unsafeWindow.abilityIsUnlocked=abilityIsUnlocked,unsafeWindow.abilityCooldown=abilityCooldown,unsafeWindow.toggleAutoClicker=toggleAutoClicker,unsafeWindow.toggleAutoTargetSwapper=toggleAutoTargetSwapper,unsafeWindow.toggleAutoAbilityUser=toggleAutoAbilityUser,unsafeWindow.toggleAutoItemUser=toggleAutoItemUser,unsafeWindow.toggleAutoUpgradeManager=toggleAutoUpgradeManager,unsafeWindow.spamNoClick=spamNoClick,unsafeWindow.toggleSpammer=toggleSpammer,unsafeWindow.getTarget=getTarget,unsafeWindow.currentLaneHasAbility=currentLaneHasAbility,unsafeWindow.laneHasAbility=laneHasAbility,unsafeWindow.getMobTypePriority=getMobTypePriority,unsafeWindow.updateStats=updateStats;var varSetter=setInterval(function(){debug&&console.log("updating options"),debug=unsafeWindow.debug,clicksPerSecond=unsafeWindow.clicksPerSecond,autoClickerVariance=unsafeWindow.autoClickerVariance,respawnCheckFreq=unsafeWindow.respawnCheckFreq,targetSwapperFreq=unsafeWindow.targetSwapperFreq,abilityUseCheckFreq=unsafeWindow.abilityUseCheckFreq,itemUseCheckFreq=unsafeWindow.itemUseCheckFreq,seekHealingPercent=unsafeWindow.seekHealingPercent,upgradeManagerFreq=unsafeWindow.upgradeManagerFreq,autoBuyAbilities=unsafeWindow.autoBuyAbilities,useMedicsAtPercent=unsafeWindow.useMedicsAtPercent,useMedicsAtLanePercent=unsafeWindow.useMedicsAtLanePercent,useMedicsAtLanePercentAliveReq=unsafeWindow.useMedicsAtLanePercentAliveReq,useNukeOnSpawnerAbovePercent=unsafeWindow.useNukeOnSpawnerAbovePercent,useMetalDetectorOnBossBelowPercent=unsafeWindow.useMetalDetectorOnBossBelowPercent,useStealHealthAtPercent=unsafeWindow.useStealHealthAtPercent,useRainingGoldAbovePercent=unsafeWindow.useRainingGoldAbovePercent,useResurrectToSaveCount=unsafeWindow.useResurrectToSaveCount,nukeBossesAfterLevel=unsafeWindow.nukeBossesAfterLevel,farmGoldOnBossesLevelDiff=unsafeWindow.farmGoldOnBossesLevelDiff,useNukeOnBossAbovePercent=unsafeWindow.useNukeOnBossAbovePercent},5e3);unsafeWindow.getDebug=function(){return debug},unsafeWindow.setDebug=function(e){debug=e}}var startAttempts=0,startAll=setInterval(function(){if(!gameRunning())return startAttempts>15&&location.reload(),void startAttempts++;clearInterval(startAll),startAllAutos(),addPointer(),addExtraUI(),updatePlayersInLane(),updatePlayersInRoom(),setInterval(function(){updatePlayersInLane(),updatePlayersInRoom()},1e4),"function"==typeof runMaster&&(location.search.match(/slave/)?runSlave():runMaster()),CSceneGame.prototype.ClearNewPlayer=function(){if(this.m_spriteFinger){{WebStorage.SetLocal("mg_how2click",1)}$J("#newplayer").hide()}},setTimeout(function(){var e=setInterval(function(){var t=getTarget(),a=!currentLaneHasAbility(17)&&4!=t.m_data.type&&2!=t.m_data.type&&3!=t.m_data.type&&t.m_data.type!==!1;a&&(clearInterval(e),location.reload())},15e3)},refreshDelay),setInterval(function(p){return p.Tick=eval("("+(""+p.Tick).replace(/document\.(hidden|webkitHidden|mozHidden|msHidden)/g,!1)+")"),function(){p=g_Minigame.m_CurrentScene,p&&document.hidden&&p.Tick()}}(CSceneGame.prototype),1e3),CUI.prototype.UpdateLootNotification=function(){if(this.m_Game.m_rgPlayerData.loot&&0!==this.m_Game.m_rgPlayerData.loot.length&&this.m_Game.m_rgGameData.level>=lastLootLevel+10&&(0===lastLootCache.length||lastLootCache.toString()!==this.m_Game.m_rgPlayerData.loot.toString())){$J("#loot_notification").show();for(var e=this.m_Game.m_rgTuningData.abilities,t="",a=0;a<this.m_Game.m_rgPlayerData.loot.length;++a){var n=this.m_Game.m_rgPlayerData.loot[a];0!==a&&(t+=", "),t+=e[n.ability].name}$J("#loot_name").text(t),setTimeout(function(){$J("#loot_notification").fadeOut(1e3)},5e3),lastLootLevel=this.m_Game.m_rgGameData.level,lastLootCache=this.m_Game.m_rgPlayerData.loot,this.m_Game.m_rgPlayerData.loot=[]}};var abilities_extra_styles=document.createElement("style");abilities_extra_styles.type="text/css",abilities_extra_styles.textContent="#activeinlanecontainer:hover {height:auto;background:rgba(50,50,50,0.9);padding-bottom:10px;position:absolute;z-index:1} #activeinlanecontainer:hover + #activitylog {margin-top:97px} #activitylog {margin-top: 29px}",document.getElementsByTagName("head")[0].appendChild(abilities_extra_styles)},1e3),endDate=initEndDate(),spammer;